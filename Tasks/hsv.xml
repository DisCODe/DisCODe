<?xml version="1.0" encoding="utf-8"?>
<Task>
	<!-- List of components -->
	<Components>
		<Camera type="CameraUniCap" thread="Thread1" group="s1">
				<dev>
					<format>GREY</format>			
				</dev>
				<image>
					<contrast>0.5</contrast>
					<brightness>0.2</brightness>			
				</image>
		</Camera>

		<!--
		<Proc type="CvColorConv" thread="Thread1" group="s1">
			<type>BGR2HSV</type>
		</Proc>

		<Split type="CvSplit" thread="Thread1" group="s1">
				<channels>3</channels>
		</Split>
		-->

		<Thr type="CvThreshold" thread="Thread1" group="s1">
			<type>THRESH_BINARY</type>
			<thresh>50</thresh>
			<maxval>255</maxval>	
		</Thr>
		
		<Morph type="CvMorphology" thread="Thread1" group="s1">
			<type>MORPH_OPEN</type>	
		</Morph>
		
		<Window type="CvWindow" thread="Thread1" group="s1">
			<title>Img</title>
		</Window>
		
		<WindowH type="CvWindow" thread="Thread1" group="s1">
			<title>Hue</title>
		</WindowH>
		
		<WindowS type="CvWindow" thread="Thread1" group="s1">
			<title>Sat</title>
		</WindowS>
		
		<WindowV type="CvWindow" thread="Thread1" group="s1">
			<title>Val</title>
		</WindowV>
		
		<WindowT type="CvWindow" thread="Thread1" group="s1">
			<title>Thr</title>
		</WindowT>
		
	</Components>

	<!-- Threads of execution -->
	<Executors>
		<Thread1 type="periodic">
			<interval>0.04</interval>
			<main_component>Camera</main_component>
		</Thread1>
	</Executors>

	<!-- Event connections -->
	<Events>
		<Event source="Camera.newImage" destination="Thr.onNewImage"/>
		<Event source="Camera.newImage" destination="Window.onNewImage"/>
		<!--
		<Event source="Proc.newImage"  destination="Split.onNewImage"/>
		<Event source="Split.newImage" destination="Thr.onNewImage"/>
		-->
		<Event source="Thr.newImage" destination="Morph.onNewImage"/>
		<Event source="Morph.newImage" destination="WindowT.onNewImage"/>
		<!-- 
		<Event source="Split.newImage" destination="Window.onNewImage"/>
		<Event source="Split.newImage" destination="WindowH.onNewImage"/>
		<Event source="Split.newImage" destination="WindowS.onNewImage"/>
		<Event source="Split.newImage" destination="WindowV.onNewImage"/>
		-->
	</Events>

	<!-- Data stream assignments -->
	<DataStreams>
		<Camera>
			<out_img type="out" group="Con1"/>
		</Camera>
		<!--<Proc>
			<in_img type="in" group="Con1"/>
			<out_img type="out" group="Con2"/>
		</Proc>-->
		<Thr>
			<in_img type="in" group="Con1"/>
			<out_img type="out" group="ConT"/>
		</Thr>
		<Morph>
			<in_img type="in" group="ConT"/>
			<out_img type="out" group="ConM"/>
		</Morph>
		<!--
		<Split>
			<in_img type="in" group="Con2"/>
			<out_img_0 type="out" group="ConH"/>
			<out_img_1 type="out" group="ConS"/>
			<out_img_2 type="out" group="ConV"/>
		</Split>-->
		<Window>
			<in_img type="in" group="Con1"/>
		</Window>
		<!--<WindowH>
			<in_img type="in" group="ConH"/>
		</WindowH>-->
		<WindowT>
			<in_img type="in" group="ConM"/>
		</WindowT>
		<!--<WindowS>
			<in_img type="in" group="ConS"/>
		</WindowS>
		<WindowV>
			<in_img type="in" group="ConV"/>
		</WindowV>-->
	</DataStreams>

</Task>
